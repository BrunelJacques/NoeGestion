

  <h5 class="card-header">Paramètres de liste</h5>

<form [formGroup]="paramsForm" class="form-group was-validated"
(ngSubmit)="onSubmitForm()">
  <div>
    <button [disabled]="loading" type="button" class="close btn btn-primary"
      aria-label="Ok"
      (click)="onSubmitForm()">
      <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
      retour ok
    </button>
    &nbsp;
    <button type="button" class="close btn btn-secondary"
      aria-label="Close"
      (click)="goBack()">
      abandon
      <i class="fas fa-turn-up"></i>
    </button>
  </div>
  <label for="jour">Date:</label>
  <input
      type= "date" id="jour" formControlName="jour"
      class="form-control"
      min="2020-01-01" max="2099-12-31">

  <label for="origine">Vers :</label>
  <select id="origine" name="origine"
    (change)="onOrigineChange($event)"
    formControlName="origine"
    class="form-control" required aria-label="origine">
    <option [ngValue]="" disabled>origine</option>
    <option *ngFor="let origine of lstorigine"
      [ngValue]="origine.code">
      {{origine.libelle}}
    </option>
  </select>

  <label class="invalid-feedback">!!! mauvais choix </label>
  <div class="form-group" *ngIf="origine.endsWith('camp')">
    <label for="camp">Camp:</label>
    <select type="text"  formControlName="camp" 
      class="form-control" required
      [ngClass]="{ 'is-invalid': submitted && f.camp.errors}">
      <option [ngValue]="" disabled>Choisir un camp</option>
      <option *ngFor="let camp of camps"
        [ngValue]="camp.id">
        {{camp.libelle}}
      </option>
    </select> 
    <div *ngIf="submitted && f.camp.errors" class="invalid-feedback">
      <div *ngIf="f.camp.errors.required">Choisissez un camp extérieur ou choisissez une autre destination</div>
    </div>
  </div>

  <div *ngIf="!(origine.endsWith('camp'))">
    <label for="repas">Repas:</label>
    <select formControlName="repas"
      class="form-control" required>
      <option [ngValue]="" disabled>destination</option>
      <option *ngFor="let repas of lstrepas"
        [ngValue]="repas.code">
        {{repas.libelle}}
      </option>
    </select>
  </div>
  <div *ngIf="params.parent && params.parent.endsWith('entrees')">
    <label for="tva">Tva mtt:</label>
    <select id="tva" name="tva" formControlName="tva" class="form-control">
      <option value="ttc">en TTC</option>
      <option value="ht">en HT</option>
    </select>

    <label for="fournisseur">Fournisseur:</label>
    <input id="fournisseur" name="fournisseur" formControlName="fournisseur" class="form-control">
  </div>
  <!--label for="parent">Parent:</label>
  <input id="parent" name="parent" formControlName="parent" class="form-control"-->

</form>
